FROM ubuntu:14.04
# only change this for version of openssl and openssh
ARG OPESSL=openssl-debian-mod-point
ARG OPENSSH=openssh-portable
# make src directory to setup items
RUN mkdir src
# COPY the openssl exploited version over
COPY ./${OPESSL}.zip /src
COPY ./${OPENSSH}.zip /src
# Install some dependencies to get the container to have pre installed
# items
RUN apt-get update -y && apt-get install -y \
	gcc \
	make \
	perl-base \
	libfindbin-libs-perl \
	unzip
# install the version of openssl
WORKDIR /src
RUN unzip ${OPESSL}.zip
WORKDIR /src/${OPESSL}
RUN ./config --prefix=/usr/local --openssldir=/usr/local/openssl
RUN make
RUN make test
RUN make install
# change workdir to src
WORKDIR /src
# TODO : need to figure out how to install openssh-portable
RUN unzip ${OPENSSH}.zip
